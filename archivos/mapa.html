
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Visualización de datos y Storytelling</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <meta name="theme-color" content="#7952b3">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>

  </head>
  <body>
    <style>
      html, body {
        height: 100%;
        margin: 0;
      }
      .leaflet-container {
        height: 100vh;
        width: 100%;
        max-width: 100%;
        max-height: 100%;
      }
    </style>
    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
      <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Visualización de datos y storytelling</a>
      <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </header>

    <div class="container-fluid">
      <div class="row">
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
          <div class="position-sticky pt-3">
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="index.html">
                  <span data-feather="home"></span>
                  Datos
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="productos.html">
                  <span data-feather="file"></span>
                  Productos
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="mapa.html">
                  <span data-feather="shopping-cart"></span>
                  Mapa de ventas
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">
                  <span data-feather="users"></span>
                  Clientes
                </a>
              </li>
            </ul>

            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
              <span>Reportes</span>
              <a class="link-secondary" href="#" aria-label="Add a new report">
                <span data-feather="plus-circle"></span>
              </a>
            </h6>
            <ul class="nav flex-column mb-2">
              <li class="nav-item">
                <a class="nav-link" href="#">
                  <span data-feather="file-text"></span>
                  Mes actual
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">
                  <span data-feather="file-text"></span>
                  Último trimestre
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">PRODUCTOS</h1>
          </div>
          <h5></h5>
          
          <div id='map'></div>

        </main>
      </div>
    </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script src="js/ordenes_confirmadas.js"></script>
  <script src="js/ordenes_transito.js"></script>
  <script src="js/ordenes_delivered.js"></script>
  <script>

    var markers = L.layerGroup();



    var lima = L.marker([-12.018339935795535, -77.08210032109963]).bindPopup('Lima').addTo(markers);
    var abancay = L.marker([-13.7322804, -72.8149939]).bindPopup('Abancay').addTo(markers);
    var arequipa = L.marker([-16.3988667, -71.5369607]).bindPopup('AREQUIPA').addTo(markers);
    var cajamarca = L.marker([-6.25, -78.833333]).bindPopup('Cajamarca').addTo(markers);
    var cusco = L.marker([-13.5170887, -71.9785356]).bindPopup('Cusco').addTo(markers);

    var mbAttr = '<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>';
    var mbUrl = 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';

    var grayscale = L.tileLayer(mbUrl, {id: 'mapbox/light-v9', tileSize: 512, zoomOffset: -1, attribution: mbAttr})
    var streets = L.tileLayer(mbUrl, {id: 'mapbox/streets-v11', tileSize: 512, zoomOffset: -1, attribution: mbAttr})
    var overlays = {}
    var map = L.map('map', {
      center: [-12.002221182006943, -77.00519605326208],
      zoom: 10,
      layers: [grayscale, markers]
    })

    ordenes_delivered.data.map(item => {
      if(item.PROVINCENAME != 'LIMA') {
        var circle = L.circle([item.lat,item.lon], {
          color: 'red',
          fillColor: '#f03',
          fillOpacity: 0.5,
          radius: item.count
        }).addTo(map)
      }
    })

    var layerControl = L.control.layers(baseLayers, overlays).addTo(map)

    var baseLayers = {
      'Grayscale': grayscale,
      'Streets': streets
    }

    var overlays = {
      'Departamentos': markers
    }


    layerControl = L.control.layers(baseLayers, overlays).addTo(map)


    var satellite = L.tileLayer(mbUrl, {id: 'mapbox/satellite-v9', tileSize: 512, zoomOffset: -1, attribution: mbAttr})

    layerControl.addBaseLayer(satellite, 'Satellite')

  </script>
  </body>
</html>
